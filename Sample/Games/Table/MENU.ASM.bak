.DATA
	DIGIT  DB ?
.CODE

LOADMENU PROC
	PUSHX	<AX,BX,CX,DX,SI>
	XOR	SI,SI
	MOV	BMP_X,0
	MOV	BMP_Y,0
	MOV	gpw1,320
	MOV	gpw2,200	
	LEA	SI,MENU1
	CALL	LOADPIC
	CALL	OPENBLOCKNUM
	CALL	HITSCORE
	XOR	AX,AX
LOOPMENU_:
	MOV	BMP_X,0
	MOV	BMP_Y,0
	MOV	gpw1,320
	MOV	gpw2,200	
	MOV	AH,8
	INT	21H
	CMP	AL,72
	JE	CHOICE_DEC_
	CMP	AL,80
	JE	CHOICE_INC_
	CMP	AL,13
	JE	LINK_EXITLOOP_
	JMP	LOOPMENU_
LINK_EXITLOOP_:
	JMP	EXITLOOPMENU_
CHOICE_DEC_:
	CMP	CHOICE,1
	JE	SHOWMENU_
	SUB	CHOICE,1
	JMP	SHOWMENU_
CHOICE_INC_:
	CMP	CHOICE,6
	JE	SHOWMENU_
	ADD	CHOICE,1
SHOWMENU_:	
	CMP	CHOICE,1
	JNE	NEXTMENU1_
	LEA	SI,MENU1
	CALL	LOADPIC
	CALL	OPENBLOCKNUM
	CALL	HITSCORE
	JMP	SHOWPIC_
NEXTMENU1_:
	CMP	CHOICE,2
	JNE	NEXTMENU2_
	LEA	SI,MENU2
	CALL	LOADPIC
	CALL	OPENBLOCKCHAR
	CALL	HITSCORE
	JMP	SHOWPIC_
NEXTMENU2_:
	CMP	CHOICE,3
	JNE	NEXTMENU3_
	LEA	SI,MENU3
	CALL	LOADPIC
	CALL	OPENBLOCKPIC	
	CALL	HITSCORE
	JMP	SHOWPIC_
NEXTMENU3_:
	CMP	CHOICE,4
	JNE	NEXTMENU4_
	LEA	SI,MENU4
	CALL	LOADPIC
	;CALL	SHOWHISCORE
	JMP	SHOWPIC_
NEXTMENU4_:
	CMP	CHOICE,5
	JNE	NEXTMENU5_
	LEA	SI,MENU5
	CALL	LOADPIC
	JMP	SHOWPIC_
NEXTMENU5_:
	LEA	SI,MENU6
	CALL	LOADPIC
SHOWPIC_:
	JMP	LOOPMENU_
EXITLOOPMENU_:

	POPX	<SI,DX,CX,BX,AX>
	RET
LOADMENU ENDP

HITSCORE PROC
	PUSHX	<AX,CX,DX,SI,BX>

	MOV	bmp_x,249
	MOV	bmp_y,152
	MOV	gpw1,15
	MOV	gpw2,19

	XOR	DX,DX	
	XOR	AX,AX
	MOV	AX,HITS
	MOV	CL,100		; DIGIT 100
	DIV	CL
	MOV	DIGIT,AL
	CALL	CHECKPIC

	MOV	DIGIT,AH
	XOR	DX,DX	
	XOR	AX,AX
	MOV	AL,DIGIT
	MOV	CL,10		; DIGIT 10
	DIV	CL
	MOV	DIGIT,AL
	CALL	CHECKPIC

	MOV	DIGIT,AH	; DIGIT 1
	CALL	CHECKPIC
	

	POPX	<BX,SI,DX,CX,AX>
	RET
HITSCORE ENDP

CHECKPIC PROC
	PUSHX	<AX,CX,DX,SI,BX>

	CMP	DIGIT,0	
	JNE	NEXTDIGIT1_
	LEA	SI,DG0
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT1_:
	CMP	DIGIT,1	
	JNE	NEXTDIGIT2_
	LEA	SI,DG1
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT2_:
	CMP	DIGIT,2	
	JNE	NEXTDIGIT3_
	LEA	SI,DG2
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT3_:
	CMP	DIGIT,3	
	JNE	NEXTDIGIT4_
	LEA	SI,DG3
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT4_:
	CMP	DIGIT,4
	JNE	NEXTDIGIT5_
	LEA	SI,DG4
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT5_:
	CMP	DIGIT,5	
	JNE	NEXTDIGIT6_
	LEA	SI,DG5
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT6_:
	CMP	DIGIT,6	
	JNE	NEXTDIGIT7_
	LEA	SI,DG6
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT7_:
	CMP	DIGIT,7	
	JNE	NEXTDIGIT8_
	LEA	SI,DG7
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT8_:
	CMP	DIGIT,8	
	JNE	NEXTDIGIT9_
	LEA	SI,DG8
	CALL	LOADPIC
	JMP	ENDCHECKPICK_
NEXTDIGIT9_:
	LEA	SI,DG9
	CALL	LOADPIC
ENDCHECKPICK_:
	ADD	BMP_X,16

	POPX	<BX,SI,DX,CX,AX>
	RET
CHECKPIC ENDP